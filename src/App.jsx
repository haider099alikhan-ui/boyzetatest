import React, { useState } from "react"; import LoginForm from "./components/LoginForm.jsx"; import Dashboard from "./components/Dashboard.jsx"; function App() { const [user, setUser] = useState(null); const [token, setToken] = useState(null); const handleLogin = (userData, authToken) => { setUser(userData); setToken(authToken); localStorage.setItem("token", authToken); localStorage.setItem("user", JSON.stringify(userData)); }; const handleLogout = () => { setUser(null); setToken(null); localStorage.removeItem("token"); localStorage.removeItem("user"); }; React.useEffect(() => { const savedToken = localStorage.getItem("token"); const savedUser = localStorage.getItem("user"); if (savedToken && savedUser) { try { setToken(savedToken); setUser(JSON.parse(savedUser)); } catch (error) { localStorage.removeItem("token"); localStorage.removeItem("user"); } } }, []); return (<div className="min-h-screen bg-gray-50">{user && token ? (<Dashboard user={user} onLogout={handleLogout} />) : (<LoginForm onLogin={handleLogin} />)}</div>); } export default App;
